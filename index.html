<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>#字游戏</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
    <script>
    $(document).ready(function () {
        var flag=1;
        var myarr=new Array();
        //建二维数组
        for(var i=0;i<3;i++){
            myarr[i]=new Array();
            for (var j=0;j<3;j++){
                myarr[i][j]=0;
            }
        }
        $(".td_class").click(function () {  /*实现X和O的交互*/
            if (flag===1){
                document.getElementById(this.id).innerHTML="x";
                link(this.id,'x');
                flag++;

            }
            else{
                document.getElementById(this.id).innerHTML="O";
                link(this.id,'O');
                flag--;
            }
            win();
        });
        //  $("#two").click(function () {          写了太多重复的过程
        //     if (flag===1){
        //         document.getElementById("two").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("two").innerHTML="O";
        //         flag--;
        //     }
        // });
        // $("#three").click(function () {
        //     if (flag===1){
        //         document.getElementById("three").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("three").innerHTML="O";
        //         flag--
        //     }
        // });
        // $("#four").click(function () {
        //     if (flag===1){
        //         document.getElementById("four").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("four").innerHTML="O";
        //         flag--;
        //     }
        // });
        // $("#five").click(function () {
        //     if (flag===1){
        //         document.getElementById("five").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("five").innerHTML="O";
        //         flag--;
        //     }
        // });
        // $("#six").click(function () {
        //     if (flag===1){
        //         document.getElementById("six").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("six").innerHTML="O";
        //         flag--;
        //     }
        // });
        // $("#seven").click(function () {
        //     if (flag===1){
        //         document.getElementById("seven").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("seven").innerHTML="O";
        //         flag--;
        //     }
        // });
        // $("#eight").click(function () {
        //     if (flag===1){
        //         document.getElementById("eight").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("eight").innerHTML="O";
        //         flag--;
        //     }
        // });
        // $("#nine").click(function () {
        //     if (flag===1){
        //         document.getElementById("nine").innerHTML="x";
        //         flag++;
        //     }
        //     else{
        //         document.getElementById("nine").innerHTML="O";
        //         flag--;
        //     }
        // });
        function win(){
            var h=judge();
            if(h===1){
                alert("x获胜");
            }
            else if(h===2){
                alert("o获胜");
            }
        }
        function link(x,type){     //没想到把id（one)映射(自定义）为数组下标！！！！！
            var a,b;
            switch (x) {
                case 'one': {
                    a=0;
                    b=0;
                }break;
                case 'two':{
                    a=0;
                    b=1;
                }break;
                case 'three':{
                    a=0;
                    b=2;
                }break;
                case 'four':{
                    a=1;
                    b=0;
                }break;
                case 'five':{
                    a=1;
                    b=1;
                }break;
                case 'six':{
                    a=1;
                    b=2;
                }break;
                case 'seven':{
                    a=2;
                    b=0;
                }break;
                case 'eight':{
                    a=2;
                    b=1;
                }break;
                case 'nine':{
                    a=2;
                    b=2;
                }break;
            }
            if(type==='x'){
                myarr[a][b]=1;

            }
            else{
                myarr[a][b]=2;
            }
            judge();
        }
        function judge(){
            //横向判断
            for(var m=0;m<3;m++){
                count1=0;
                count2=0;
                for (var n=0;n<3;n++){
                    if(myarr[m][n]===1){
                        count1++;
                        if (count1===3)
                            return 1;
                    }
                    else if (myarr[m][n]===2){
                        count2++;
                        if (count2===3)
                            return 2;
                    }
                }
            }
            //竖向判断
            for (var m=0;m<3;m++ ){
                count1=0;
                count2=0;
                for (var n=0;n<3;n++){
                    if(myarr[n][m]===1){
                        count1++;
                        if (count1===3)
                            return 1;
                    }
                    else if (myarr[n][m]===2){
                        count2++;
                        if (count2===3)
                            return 2;
                    }
                }
            }
            //斜向判断(两种情况）
            for (var m=0;m<3;m++ ){
                count1=0;
                count2=0;
                if(myarr[m][m]===1){
                    count1++;
                    if (count1===3)
                        return 1;
                }
                else if (myarr[m][m]===2){
                    count2++;
                    if (count2===3)
                        return 2;
                }
            }
            for (var m=0;m<3;m++){
                count1=0;
                count2=0;
                if(myarr[m][2-m]===1){
                    count1++;
                    if (count1===3)
                        return 1;
                }
                else if (myarr[m][2-m]===2){
                    count2++;
                    if (count2===3)
                       return 2;
                }

            }
        }
    });
</script>
    <style> /*表格样式*/
        table  tr td{
            border:1px solid #000;
            width: 200px;
            height: 200px;
        }
    </style>
</head>
<body>
<!--表格-->
<table>
    <tbody>
    <tr>
        <td id="one" class="td_class"></td>
        <td id="two" class="td_class"></td>
        <td id="three" class="td_class"></td>
    </tr>
    <tr>
        <td id="four" class="td_class"></td>
        <td id="five" class="td_class"></td>
        <td id="six" class="td_class"></td>
    </tr>
    <tr>
        <td id="seven" class="td_class"></td>
        <td id="eight" class="td_class"></td>
        <td id="nine" class="td_class"></td>
    </tr>
    </tbody>
</table>
</body>
</html>
